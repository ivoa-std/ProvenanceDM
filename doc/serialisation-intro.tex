Serialization files constitute the building blocks of the client/server and client/client dialogs.
The provenance information as represented in the data model is split in three main concepts that can be searched following many different relations between the main 3 classes, \class{Activity}, \class{Entity} and \class{Agent}.
The selection of the relations to expose when distributing the provenance information depends on the usage and will be described more extensively in the Implementation Note \citep{std:ProvenanceImplementationNote} and the links therein.

To give a very simple example, suppose a client asks for the context of execution for one specified activity, which computes a simple RGB color composition. 
On the server side, exposing the provenance information for this activity or for an entity, corresponding to a monocolor or RGB image, means to just expose the structure of the classes and relation tables and feed them with the related tuples in the database.
On the client side, the content of a VO-Provenance serialization document can then be explored and represented using graphical interfaces, as inspired by the Provenance Southampton suite or by customized visualization tools.

\subsection{Serialization formats: PROV-N, PROV-JSON and PROV-XML} % from W3C reused and extended
The serialization formats {PROV-N}, {PROV-JSON} and {PROV-XML} are proposed 
in the W3C Provenance framework for storing and exchanging the provenance metadata: {PROV-N}, {PROV-JSON} and {PROV-XML}, defined in \cite{std:PROV-N}, \cite{std:PROV-JSON} and \cite{std:PROV-XML}, respectively. 
%These are serializations of the W3C provenance data model, a larger set of classes and relations compared to this model but sharing the same core structure. 
They can be reused here as well for serializations of our data model. For producing fully W3C compatible serializations, see Section~\ref{sec:w3cserialization}.

% NOTE: we actually never use PROV-XML here!!

%example KR provn 
Here is an example serialization instance document for an entity being processed by an activity, in PROV-N notation:

\begin{verbnobox}[\scriptsize]

document
  prefix ivo <http://www.ivoa.net/documents/rer/ivo/>
  prefix ex <http://www.example.com/provenance/>
  prefix voprov <http://www.ivoa.net/documents/dm/provdm/voprov/>

  entity(ivo://example#Public_NGC6946, [voprov:name="Processed image of NGC 6946"])
  entity(ivo://example#DSS2.143, [voprov:name="Unprocessed image of NGC 6946"])
  activity(ex:Process1, 2017-04-18T17:28:00, 2017-04-19T17:29:00, [voprov:name="Process 1"])
  used(ex:Process1, ivo://example#DSS2.143, -)
  wasGeneratedBy(ivo://example#Public_NGC6946, ex:Process1, 2017-05-05T00:00:00)
endDocument

\end{verbnobox}

\noindent
Here is the same example in PROV-JSON format:
\begin{verbnobox}[\scriptsize]
{
  "prefix": {
    "ivo": "http://www.ivoa.net/documents/rer/ivo/",
    "voprov": "http://www.ivoa.net/documents/dm/provdm/voprov/",
    "ex": "http://www.example.com/provenance/"
  },
  "activity": {
    "ex:Process1": {
      "voprov:startTime": "2017-04-18T17:28:00",
      "voprov:endTime": "2017-04-19T17:29:00",
      "voprov:name": "Process 1"
    }
  },
  "wasGeneratedBy": {
    "_:id4": {
      "voprov:time": "2017-05-05T00:00:00",
      "voprov:entity": "ivo://example#Public_NGC6946",
      "voprov:activity": "ex:Process1"
    }
  },
  "used": {
    "_:id1": {
      "voprov:entity": "ivo://CDS/P/DSS2/POSSII#POSSII.J-DSS2.143",
      "voprov:activity": "hips:AlaRGB1"
    }
  }
  "entity": {
    "ivo://example#DSS2.143": {
      "voprov:name": "Unprocessed image of NGC6946"
    },
    "ivo://example#Public_NGC6946": {
      "voprov:name": "Processed image of NGC 6946"
    }
  }
}
\end{verbnobox}
\noindent
PROV-JSON, PROV-N and PROV-XML can be converted into each other, e.g.  using the prov or voprov python package (see Section ``voprov'' in Implementation Note \citep{std:ProvenanceImplementationNote}).

\subsection{VOTable format for Provenance metadata} 
To emphasize the compatibility to the IVOA framework, where the VOTable-XML
format is a reference to circulate metadata, we define a VOTable mapping
specification. All classes' declarations and relations described for this data model are translated into separated tables, one for each class of the model.
% , also see the ProvTAP document.
% see Appendix~\ref{sec:appendix-prov-votable}.
All attributes of these classes are
translated to columns, i.e. VOTable FIELDS. In addition, the specification
defines the VOTable values of the FIELD and PARAM attributes \texttt{ucd},
\texttt{datatype}, \texttt{utype}, \texttt{unit}, \texttt{description}, etc.

This can be appropriately used for two goals:
\begin{itemize}
	\item Publishing full provenance metadata for data collections in VOTable format. This can be produced by data processing workflows or as output of databases containing provenance metadata.
	\item Providing the backbone for the TAP schema describing IVOA provenance metadata which isused for ProvTAP 
\end{itemize}

These VOTable serializations can be produced using the voprov python module, available to the community, see also Section ``voprov'' in Implementation Note \citep[]{std:ProvenanceImplementationNote}.

Here is a VOTable document transcription of the serialization example given above in PROV-N and PROV-JSON:

\begin{verbnobox}[\scriptsize]
<?xml version="1.0" encoding="UTF-8"?>
<VOTABLE version="1.2" xmlns="http://www.ivoa.net/xml/VOTable/v1.2" 
  xmlns:ex="http://www.example.com/provenance" 
  xmlns:ivo="http://www.ivoa.net/documents/rer/ivo/"
  xmlns:voprov="http://www.ivoa.net/documents/dm/provdm/voprov/" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xsi:schemaLocation="http://www.ivoa.net/xml/VOTable/v1.2 http://www.ivoa.net/xml/VOTable/VOTable-1.2.xsd">
  <RESOURCE type="provenance">
    <DESCRIPTION>Provenance VOTable</DESCRIPTION>
    <TABLE name="Usage" utype="voprov:used">
      <FIELD arraysize="*" datatype="char" name="activity" ucd="meta.id" utype="voprov:Usage.activity"/>
      <FIELD arraysize="*" datatype="char" name="entity" ucd="meta.id" utype="voprov:Usage.entity"/>
      <DATA>
        <TABLEDATA>
          <TR>
            <TD>ex:Process1</TD>
            <TD>ivo://example#DSS2.143</TD>
          </TR>
        </TABLEDATA>
      </DATA>
    </TABLE>
    <TABLE name="Generation" utype="voprov:wasGeneratedBy">
      <FIELD arraysize="*" datatype="char" name="entity" ucd="meta.id" utype="voprov:Generation.entity"/>
      <FIELD arraysize="*" datatype="char" name="activity" ucd="meta.id" utype="voprov:Generation.activity"/>
      <DATA>
        <TABLEDATA>
          <TR>
            <TD>ivo://example#Public_NGC6946</TD>
            <TD>ex:Process1</TD>
          </TR>
        </TABLEDATA>
      </DATA>
    </TABLE>
    <TABLE name="Activity" utype="voprov:Activity">
      <FIELD arraysize="*" datatype="char" name="id" ucd="meta.id" utype="voprov:Activity.id"/>
      <FIELD arraysize="*" datatype="char" name="name" ucd="meta.title" utype="voprov:Activity.name"/>
      <FIELD arraysize="*" datatype="char" name="start" ucd="" utype="voprov:Activity.startTime"/>
      <FIELD arraysize="*" datatype="char" name="stop" ucd="" utype="voprov:Activity.endTime"/>
      <DATA>
        <TABLEDATA>
          <TR>
            <TD>ex:Process1</TD>
            <TD>Process 1</TD>
            <TD>2017-04-18 17:28:00</TD>
            <TD>2017-04-19 17:29:00</TD>
          </TR>
        </TABLEDATA>
      </DATA>
    </TABLE>
    <TABLE name="Entity" utype="voprov:Entity">
      <FIELD arraysize="*" datatype="char" name="id" ucd="meta.id" utype="voprov:Entity.id"/>
      <FIELD arraysize="*" datatype="char" name="name" ucd="meta.title" utype="voprov:Entity.name"/>
      <DATA>
        <TABLEDATA>
          <TR>
            <TD>ivo://example#DSS2.143</TD>
            <TD>Unprocessed image of NGC6946</TD>
          </TR>
          <TR>
            <TD>ivo://example#Public_NGC6946</TD>
            <TD>Processed image of NGC 6946</TD>
          </TR>
        </TABLEDATA>
      </DATA>
    </TABLE>
    <INFO name="QUERY_STATUS" value="OK"/>
  </RESOURCE>
</VOTABLE>

\end{verbnobox}

This VOTable serialization can be considered as a flat view on the various tables stored in a database implementing the datamodel structure explained in Section~\ref{sec:datamodel}.
More examples of serialization documents are provided in Appendix \ref{sec:appendix-serialization-examples}.


Such serializations can be retrieved through access protocols (see \ref{sec:access_protocols} ) or directly integrated in dataset headers or ``associated metadata'' in order to provide provenance metadata for these datasets. E.g. for FITS files, a provenance extension called ``PROVENANCE'' could be added which contains provenance information of the workflow that generated the FITS file. This information could be stored directly using one of the serialization formats, for example as a unique cell in an ASCII TABLE extension.

% I believe the PROV-keyword was already used in FITS, but not PROVENANCE.
%\TODO{SVOM strategy to incorporate provenance as an extension in FITS ? still valid ?}
